{"componentChunkName":"component---src-templates-blog-template-js","path":"/Prisma/prisma00/","result":{"data":{"cur":{"id":"36e73154-7985-53e9-b165-16a63542fa00","html":"<h2 id=\"prisma를-구성하는-대표적인-요소들\" style=\"position:relative;\"><a href=\"#prisma%EB%A5%BC-%EA%B5%AC%EC%84%B1%ED%95%98%EB%8A%94-%EB%8C%80%ED%91%9C%EC%A0%81%EC%9D%B8-%EC%9A%94%EC%86%8C%EB%93%A4\" aria-label=\"prisma를 구성하는 대표적인 요소들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prisma를 구성하는 대표적인 요소들</h2>\n<ul>\n<li>Prisma Client: Node.js &#x26; TypeScript용 쿼리 작성 클라이언트이다.</li>\n<li>Prisma Migrate: 마이그레이션 시스템을 사용가능</li>\n<li>Prisma Studio: 데이터베이스의 데이터를 보고 편집하는 GUI 툴 제공함</li>\n</ul>\n<h2 id=\"prisma-장점\" style=\"position:relative;\"><a href=\"#prisma-%EC%9E%A5%EC%A0%90\" aria-label=\"prisma 장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prisma 장점</h2>\n<ul>\n<li>\n<p>개발자가 직접 SQL문을 작성하지 않아도, 데이터베이스와 상호작용할 수 있는 ORM</p>\n</li>\n<li>\n<p>타 ORM과는 달리, 자체적인 스키마 문법을 제공하여 직접 DB마이그레이션, 클라이언트 코드 생성 등의 작업이 가능하다.</p>\n</li>\n<li>\n<p>CLI,Prisma Studio등 편리한 GUI도구를 제공하여 생산성 향상</p>\n</li>\n</ul>\n<p>즉 개발자 입장에서 DB작성을위한 코드작성을 줄일 수 있고 스키마 파일 하나만 잘 관리하면 되기 때문에 유지보수가 수월하다.</p>\n<h2 id=\"prisma-기능\" style=\"position:relative;\"><a href=\"#prisma-%EA%B8%B0%EB%8A%A5\" aria-label=\"prisma 기능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prisma 기능</h2>\n<ul>\n<li>\n<p>Prisma Client: 데이터베이스와 상호 작용하기 위한 자바스크립트 코드를 자동으로 생성해주는 도구.</p>\n</li>\n<li>\n<p>스키마 정의: 데이터베이스 스키마를 정의하고 관리해줌.</p>\n</li>\n<li>\n<p>DB 마이그레이션: 데이터베이스 스키마 변경을 추적하고 적용할 수 있는 마이그레이션 기능을 제공함.</p>\n</li>\n<li>\n<p>DB 관계 정의: 복잡한 데이터베이스 관계를 정의하고 쿼리 기능을 제공함</p>\n</li>\n</ul>\n<p>예를들면 다음코드처럼 Prisma를 짤 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">datasource db<span class=\"token punctuation\">{</span>\r\n    provider <span class=\"token operator\">=</span> <span class=\"token string\">\"postgresql\"</span>\r\n    url <span class=\"token operator\">=</span> <span class=\"token function\">env</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DATABASE_URL'</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\ngenerator client <span class=\"token punctuation\">{</span>\r\n    provider <span class=\"token operator\">=</span> <span class=\"token string\">\"prisma-client-js\"</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodal Post <span class=\"token punctuation\">{</span>\r\n    id Int @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">autoincrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    title String\r\n    content String<span class=\"token operator\">?</span>\r\n    published Boolean @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\r\n    author user<span class=\"token operator\">?</span> @<span class=\"token function\">releation</span><span class=\"token punctuation\">(</span>fields<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>authorId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">references</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n    autorId Int<span class=\"token operator\">?</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodal User <span class=\"token punctuation\">{</span>\r\n    id Int @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">autoincrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    email String @unique\r\n    name String<span class=\"token operator\">?</span>\r\n    posts Post<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"prisma-스키마\" style=\"position:relative;\"><a href=\"#prisma-%EC%8A%A4%ED%82%A4%EB%A7%88\" aria-label=\"prisma 스키마 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prisma 스키마</h2>\n<blockquote>\n<p>작성한 스키마를 DB에 반영하기위해선 마이그레이션 명령어 작성해줘야함</p>\n</blockquote>\n<ul>\n<li>\n<p>모델(Modal): 모델은 데이터베이스의 특정 테이블이나 컬렉션과 대응한다. Prisma에서 모델을 정의하면 해당 모델에 대한 데이터베이스 테이블이나 컬렉션이 생성된다.</p>\n</li>\n<li>\n<p>필드(Field): 모델 내에서 필드는 해당 모델이 가지는 데이터 속성을 나타낸다. 각 필드는 데이터 타입과 제약 조건을 가질 수 있다.</p>\n</li>\n<li>\n<p>관계 (Relation): Prisma에서 관계는 모델 간의 연결을 나타낸다. 두 테이블 간의 외래 키 (Foreign Key)를 관리하고 연관된 데이터를 쿼리 가능함</p>\n</li>\n</ul>\n<p>모델,필드,관계는 아래 코드처럼 연결이된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">datasource db<span class=\"token punctuation\">{</span>\r\n    provider <span class=\"token operator\">=</span> <span class=\"token string\">\"postgresql\"</span>\r\n    url <span class=\"token operator\">=</span> <span class=\"token function\">env</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DATABASE_URL'</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\ngenerator client <span class=\"token punctuation\">{</span>\r\n    provider <span class=\"token operator\">=</span> <span class=\"token string\">\"prisma-client-js\"</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token comment\">// modal</span>\r\nmodal Post <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">/**필드 */</span> id  Int @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">autoincrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    title String\r\n    content String<span class=\"token operator\">?</span>\r\n    published Boolean @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\r\n    author user<span class=\"token operator\">?</span> @<span class=\"token function\">releation</span><span class=\"token punctuation\">(</span>fields<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>authorId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">references</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n    autorId Int<span class=\"token operator\">?</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodal User <span class=\"token punctuation\">{</span>\r\n    id Int @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">autoincrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    email String @unique\r\n    name String<span class=\"token operator\">?</span>\r\n    posts Post<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// 위의 Post modal과 연결</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"prisma를-활용한-crud\" style=\"position:relative;\"><a href=\"#prisma%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-crud\" aria-label=\"prisma를 활용한 crud permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prisma를 활용한 CRUD</h2>\n<h3 id=\"생성\" style=\"position:relative;\"><a href=\"#%EC%83%9D%EC%84%B1\" aria-label=\"생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>생성</h3>\n<p>create API를 사용해서 데이터를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> prisma<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">'email@example.com'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'example'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"데이터-조회\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A1%B0%ED%9A%8C\" aria-label=\"데이터 조회 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터 조회</h3>\n<ul>\n<li>\n<p>findaMany 또는 findUnique를 사용한다.</p>\n</li>\n<li>\n<p>where, orderBy, include, select등의 옵션으로 쿼리 조절이 가능하다.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> prisma<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">findMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">where</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">gte</span><span class=\"token operator\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">orderBy</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'asc'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">include</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">posts</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">select</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"업데이트\" style=\"position:relative;\"><a href=\"#%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8\" aria-label=\"업데이트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>업데이트</h3>\n<ul>\n<li>하나만 수정하기위해선 update 사용</li>\n<li>여러 레코드를 한번에 업데이트 하려면 updateMany 사용</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> prisma<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">where</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'update Name'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"삭제\" style=\"position:relative;\"><a href=\"#%EC%82%AD%EC%A0%9C\" aria-label=\"삭제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>삭제</h3>\n<ul>\n<li>\n<p>데이터를 삭제하기 위해서 delete 메서드 사용</p>\n</li>\n<li>\n<p>여러 레코드 삭제엔 deleteMany 사용</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> prisma<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">where</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> prisma<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">deleteMany</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  <span class=\"token literal-property property\">where</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">contains</span><span class=\"token operator\">:</span> <span class=\"token string\">'prisma.io'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"마이그레이션\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98\" aria-label=\"마이그레이션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마이그레이션</h2>\n<ul>\n<li>스키마를 DB에 반영하기 위해 마이그레이션을 작성해줘야한다.</li>\n</ul>\n<p><code class=\"language-text\">npx prisma migrate dev</code> 으로 인스톨해주고,</p>\n<p><code class=\"language-text\">npx prisma migrate dev --name init</code> 로 마이그레이션 이름을 만들어줄 수 있다.</p>\n<ul>\n<li>마이그레이션 된 파일들은 prisma/migration에 생성이된다.</li>\n</ul>\n<h3 id=\"마이그레이션-파일-예시\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%ED%8C%8C%EC%9D%BC-%EC%98%88%EC%8B%9C\" aria-label=\"마이그레이션 파일 예시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마이그레이션 파일 예시</h3>\n<p><code class=\"language-text\">마이그레이션 파일은 직접 수정하면 안된다고한다.</code></p>\n<p>항상 prisma migrate 명령어를 통해서만 파일 생성과 디비를 수정해줘야한다.</p>\n<p>다음과 같은 파일이 만들어지면, 실제 테이블이 DB에도 만들어지고, 데이터 CRUD가 가능해진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">--</span> CreateTable\r\n<span class=\"token constant\">CREATE</span> <span class=\"token constant\">TABLE</span> <span class=\"token string\">\"User\"</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">\"id\"</span> <span class=\"token constant\">TEXT</span> <span class=\"token constant\">NOT</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"email\"</span> <span class=\"token constant\">TEXT</span> <span class=\"token constant\">NOT</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"name\"</span> <span class=\"token constant\">TEXT</span><span class=\"token punctuation\">,</span>\r\n\r\n    <span class=\"token constant\">CONSTRAINT</span> <span class=\"token string\">\"User_pkey\"</span> <span class=\"token constant\">PRIMARY</span> <span class=\"token constant\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token operator\">--</span> CreateTable\r\n<span class=\"token constant\">CREATE</span> <span class=\"token constant\">TABLE</span> <span class=\"token string\">\"Post\"</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">\"id\"</span> <span class=\"token constant\">TEXT</span> <span class=\"token constant\">NOT</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"title\"</span> <span class=\"token constant\">TEXT</span> <span class=\"token constant\">NOT</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"content\"</span> <span class=\"token constant\">TEXT</span> <span class=\"token constant\">NOT</span> <span class=\"token constant\">NULL</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"createdAt\"</span> <span class=\"token constant\">TIMESTAMP</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token constant\">NOT</span> <span class=\"token constant\">NULL</span> <span class=\"token constant\">DEFAULT</span> <span class=\"token constant\">CURRENT_TIMESTAMP</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"updatedAt\"</span> <span class=\"token constant\">TIMESTAMP</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token constant\">NOT</span> <span class=\"token constant\">NULL</span> <span class=\"token constant\">DEFAULT</span> <span class=\"token constant\">CURRENT_TIMESTAMP</span>\r\n    <span class=\"token string\">\"userId\"</span> <span class=\"token constant\">TEXT</span><span class=\"token punctuation\">,</span>\r\n\r\n    <span class=\"token constant\">CONSTRAINT</span> <span class=\"token string\">\"Post_pkey\"</span> <span class=\"token constant\">PRIMARY</span> <span class=\"token constant\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token operator\">--</span> CreateIndex\r\n<span class=\"token constant\">CREATE</span> <span class=\"token constant\">UNIQUE</span> <span class=\"token constant\">INDEX</span> <span class=\"token string\">\"User_emil_key\"</span> <span class=\"token constant\">ON</span> <span class=\"token string\">\"User\"</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"email\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token operator\">--</span> CreateIndex\r\n<span class=\"token constant\">CREATE</span> <span class=\"token constant\">INDEX</span> <span class=\"token string\">\"Post_userId_idx\"</span> <span class=\"token constant\">ON</span> <span class=\"token string\">\"Post\"</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"userId\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token operator\">--</span> AddForeignKey\r\n<span class=\"token constant\">ALTER</span> <span class=\"token constant\">TABLE</span> <span class=\"token string\">\"Post\"</span> <span class=\"token constant\">ADD</span> <span class=\"token constant\">CONSTRAINT</span> <span class=\"token string\">\"Post_userId_fkey\"</span> <span class=\"token constant\">FOREIGN</span> <span class=\"token constant\">KEY</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"userid\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token constant\">REFERENCES</span> <span class=\"token string\">\"User\"</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> <span class=\"token constant\">ON</span> <span class=\"token constant\">DELETE</span> <span class=\"token constant\">SET</span> <span class=\"token constant\">NULL</span> <span class=\"token constant\">ON</span> <span class=\"token constant\">UPDATE</span> <span class=\"token constant\">CASCADE</span><span class=\"token punctuation\">;</span>\r\n</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#prisma%EB%A5%BC-%EA%B5%AC%EC%84%B1%ED%95%98%EB%8A%94-%EB%8C%80%ED%91%9C%EC%A0%81%EC%9D%B8-%EC%9A%94%EC%86%8C%EB%93%A4\">Prisma를 구성하는 대표적인 요소들</a></p>\n</li>\n<li>\n<p><a href=\"#prisma-%EC%9E%A5%EC%A0%90\">Prisma 장점</a></p>\n</li>\n<li>\n<p><a href=\"#prisma-%EA%B8%B0%EB%8A%A5\">Prisma 기능</a></p>\n</li>\n<li>\n<p><a href=\"#prisma-%EC%8A%A4%ED%82%A4%EB%A7%88\">Prisma 스키마</a></p>\n</li>\n<li>\n<p><a href=\"#prisma%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-crud\">Prisma를 활용한 CRUD</a></p>\n<ul>\n<li><a href=\"#%EC%83%9D%EC%84%B1\">생성</a></li>\n<li><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A1%B0%ED%9A%8C\">데이터 조회</a></li>\n<li><a href=\"#%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8\">업데이트</a></li>\n<li><a href=\"#%EC%82%AD%EC%A0%9C\">삭제</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98\">마이그레이션</a></p>\n<ul>\n<li><a href=\"#%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%ED%8C%8C%EC%9D%BC-%EC%98%88%EC%8B%9C\">마이그레이션 파일 예시</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"Prisma를 구성하는 대표적인 요소들 Prisma Client: Node.js & TypeScript용 쿼리 작성 클라이언트이다. Prisma Migrate: 마이그레이션 시스템을 사용가능 Prisma Studio: 데이터베이스의 데이터를 보고 편집하는 GUI 툴 제공함 Prisma 장점 개발자가 직접 SQL문을 작성하지 않아도, 데이터베이스와 상호작용할 수 있는 ORM 타 ORM과는 달리, 자체적인 스키마 문법을 제공하여 직접 DB마이그레이션, 클라이언트 코드 생성 등의 작업이 가능하다. CLI,Prisma Studio등 편리한 GUI도구를 제공하여 생산성 향상 즉 개발자 입장에서 DB작성을위한 코드작성을 줄일 수 있고 스키마 파일 하나만 잘 관리하면 되기 때문에 유지보수가 수월하다. Prisma 기능 Prisma Client: 데이터베이스와 상호 작용하기 위한 자바스크립트 코드를 자동으로 생성해주는 도구. 스키마 정의: 데이터베이스 스키마를 정의하고 관리해줌. DB 마이그레이…","frontmatter":{"date":"February 23, 2024","title":"Prisma","categories":"prisma","author":"정중식","emoji":"✍"},"fields":{"slug":"/Prisma/prisma00/"}},"next":{"id":"40f7f572-ae35-51d5-b985-52c2c73a8b7f","html":"<h2 id=\"nextjs-script컴포넌트란\" style=\"position:relative;\"><a href=\"#nextjs-script%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%9E%80\" aria-label=\"nextjs script컴포넌트란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nextjs Script컴포넌트란?</h2>\n<ul>\n<li>\n<p>서버 및 클라이언트 모두에서 JavaScript 코드를 실행하고 데이터를 초기화하는데 사용되는 컴포넌트다.<br/>\r\n(SSR, CSR 모두 적용 가능함)</p>\n</li>\n<li>\n<p>서버에서 데이터를 미리 가져와 클라이언트로 전달하거나, 클라이언트 측에서 라우팅 또는 페이지 진입시 특정 작업을 수행 할 수 있음</p>\n</li>\n<li>\n<p><code class=\"language-text\">서버 사이드 데이터 로딩</code>: 페이지가 서버에서 처음 렌더링 될 때 데이터 초기화하는데 사용한다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">클라이언트 사이드 데이터 로딩</code>: 페이지가 클라이언트에서 로딩될 때 특정 작업 수행하도록 설정 할 수 있다.</p>\n</li>\n</ul>\n<br/>\n<p>사용예시</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Script <span class=\"token keyword\">from</span> <span class=\"token string\">'next/script'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Dashboard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>Script src<span class=\"token operator\">=</span><span class=\"token string\">\"https://example.com/script.js\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이러면 저 script는 Dashboard라는 페이지 진입시 로드됨</p>\n<h2 id=\"주요-속성-정리\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EC%86%8D%EC%84%B1-%EC%A0%95%EB%A6%AC\" aria-label=\"주요 속성 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 속성 정리</h2>\n<ul>\n<li>\n<p>src : 로드할 스크립트 파일 경로 지정\r\n<code class=\"language-text\">EX) src=\"http://example.com/script\"</code></p>\n</li>\n<li>\n<p>strategy : 스크립트의 로드 전략 설정 (언제 로드/실행 하는지)\r\n<code class=\"language-text\">Ex) strategy=\"lazyOnload\"</code></p>\n</li>\n<li>\n<p>onLoad : 스크립트가 로드되면 실행할 함수 지정\r\n<code class=\"language-text\">Ex) onLoad ={onLoadFunc}</code></p>\n</li>\n<li>\n<p>onReady : 스크립트가 준비되면 실행할 함수 지정\r\n<code class=\"language-text\">Ex) onReady ={onReadyFunc}</code></p>\n</li>\n<li>\n<p>onError : 스크립트 로드 중에 오류가 발생할 때 실행할 함수 지정\r\n<code class=\"language-text\">Ex) onError={onErrorFunc}</code></p>\n</li>\n</ul>\n<h3 id=\"script-strategy-속성-더-살펴보기\" style=\"position:relative;\"><a href=\"#script-strategy-%EC%86%8D%EC%84%B1-%EB%8D%94-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"script strategy 속성 더 살펴보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Script: strategy 속성 더 살펴보기</h3>\n<ul>\n<li>\n<p>스크립트의 로드 전략을 설정할 수 있는 옵션이다. 주로 스크립트가 언제 로드되고 실행할 지 지정한다.</p>\n</li>\n<li>\n<p>다음 네가지 옵션이 있다.</p>\n<ul>\n<li>\n<p>afterInteractive(기본값): 스크립트가 페이지 상호 작용 가능한 후에 로드되고 실행됨\r\n<br/></p>\n</li>\n<li>\n<p>beforeInteractive: 스크립트가 페이지의 상호 작용 가능한 상태 이전에 로드되고 실행됨\r\n(hydration 이전) <br/></p>\n</li>\n<li>\n<p>lazyOnLoad: 스크립트가 페이지가 완전히 로드된 후에 로드되고 실행됨 (브라우저 idle 타임에)\r\n<br/></p>\n</li>\n<li>\n<p>worker(experimental): Service Worker와 같은 백그라운드 워커 스크립트를 로드하고 실행하는데 사용\r\n(오프라인 캐싱이나 알림등)</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"script-onready-속성과-onload속성-더-살펴보기\" style=\"position:relative;\"><a href=\"#script-onready-%EC%86%8D%EC%84%B1%EA%B3%BC-onload%EC%86%8D%EC%84%B1-%EB%8D%94-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"script onready 속성과 onload속성 더 살펴보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Script: onReady 속성과 onLoad속성 더 살펴보기</h3>\n<ul>\n<li>\n<p>onLoad: 스크립트 파일이 브라우저에 성공적으로 로드될 때 호출된다.</p>\n<ul>\n<li>스크립트 파일에 추가적인 초기화 작업이 필요한 경우, onLoad를 사용해서 수행가능하다.</li>\n<li>beforeInteractive과는 사용 불가함.(onReady 사용권장)<br/></li>\n</ul>\n</li>\n<li>\n<p>onReady: 스크립트 파일이 브라우저에 로드되고,스크립트 내 모든 작업이 완료되었으며, 페이지가 상호 작용 가능한 상태가 될 때 호출된다.</p>\n<ul>\n<li>스크립트가 완전히 초기화 되고, 페이지의 모든 요소 초기화 + 상호 작용 작업 완료된 후 호출됨</li>\n</ul>\n</li>\n</ul>\n<p>아래는 onReady의 예시코드인데, 해당 컴포넌트가 완전히 마운트 된 후에 구글맵을 다시 인스턴트화하는 코드이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Script\r\n  id<span class=\"token operator\">=</span><span class=\"token string\">\"google-maps\"</span>\r\n  src<span class=\"token operator\">=</span><span class=\"token string\">\"https://maps.googleapis.com/maps/api/js\"</span>\r\n  onReady<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span>mapRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">center</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">34.397</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token number\">150.644</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>zoom<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\r\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#nextjs-script%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%9E%80\">Nextjs Script컴포넌트란?</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A3%BC%EC%9A%94-%EC%86%8D%EC%84%B1-%EC%A0%95%EB%A6%AC\">주요 속성 정리</a></p>\n<ul>\n<li><a href=\"#script-strategy-%EC%86%8D%EC%84%B1-%EB%8D%94-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\">Script: strategy 속성 더 살펴보기</a></li>\n<li><a href=\"#script-onready-%EC%86%8D%EC%84%B1%EA%B3%BC-onload%EC%86%8D%EC%84%B1-%EB%8D%94-%EC%82%B4%ED%8E%B4%EB%B3%B4%EA%B8%B0\">Script: onReady 속성과 onLoad속성 더 살펴보기</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 22, 2024","title":"Nextjs Script컴포넌트","categories":"next.js","author":"정중식","emoji":"✍"},"fields":{"slug":"/NextJs/Nextjs02/"}},"prev":{"id":"39397246-5445-55c7-9bb3-a887cbf3ba67","html":"<h2 id=\"1-supabase-회원가입-및-프로젝트-생성\" style=\"position:relative;\"><a href=\"#1-supabase-%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85-%EB%B0%8F-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"1 supabase 회원가입 및 프로젝트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1 Supabase 회원가입 및 프로젝트 생성</h2>\n<p><a href=\"https://supabase.com\">Supabase</a>에서 회원가입후 프로젝트를 생성한다.</p>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 711px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 80.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/0lEQVQ4y31U23KbMBT0b8RmBoSQEIhL4oINtPE0jjNNH9pk2ua9M/n/b9jOyhYB29OHnZWEzp6jc2FhjMEwfEa72aDrOgx9jyRJIIRAHMf/hZRyxkEQYKGUQl3XqKrKoSxLWGsdE0VRjJie0akXmwlyo7V2YLRpmjr24N6D+zzPwSCmYjNBeqJHXvQfPGjoRbIsuypEUIM8RkgjGkxzQqSpQdM06LZbtE3j7jC3545ngvTKCPzFqajNrUuFj4J3ldIT9ms1j5BGFJxWlufbTYuisJAyhlYJtFZHnuBCkJ5ZVY9jngQSlcIWa1RVg/q2dWuT1RfIjEWRl+4FoyBz46vq2kFE0HmB3Y9f2L++Yf/6B5vDd5TDA6ov+xnW9/foD3tok2G1WmHBZ0ZR9PFk5lAIqCJD/rVFtmtgdp/cOn3aQD+eeN9ADTWS4RZyqBEbhYCCjMiY9KIVJKsXxZChGBGTeSZix/H0mxgnRbvuPx8j5vL52zO6vse26xz3fe8KyFfI5AQpobSC9DlkAa7NJQ39GPrR49o1eZ47tjwrLHJrP6pMY+bw2gRMm1cQ0x9GJBDeBAiXgWMRRqcqK+WmgZW+Jur7dJxpkyJVGllbo3t/Qf/3J/r3F+h1idXN8lhlPo05C8PQRXuOmSPmTcRI6hx3bwfc/X50HJcGq+US/wDrd9Lg8Gw1yAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\" img\" title=\" img\" src=\"/static/716774d906e911d463c35354d8493e6c/a8e5b/1-1.png\" srcset=\"/static/716774d906e911d463c35354d8493e6c/e9ff0/1-1.png 180w,\n/static/716774d906e911d463c35354d8493e6c/f21e7/1-1.png 360w,\n/static/716774d906e911d463c35354d8493e6c/a8e5b/1-1.png 711w\" sizes=\"(max-width: 711px) 100vw, 711px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br>\n<p>위의 사진처럼 데이터베이스 패스워드를 작성후,\r\nRegion은 한국 서울로해주자</p>\n<p><code class=\"language-text\">데이터베이스 패스워드는 추후 prisma 세팅할 때 사용되므로 복사해주자</code></p>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABoElEQVQoz12RvY4UMRCE5yWAu7Fn7O7qdtszO7M/x09wGyACEiQiEgQBIj6RoL2TQAQ8A+J9wTPsIShVYsufq9xuro/H6+Px6ZNn+91hmqZ53g7jmHPOpfxnq7tmZqUM83Y+HA6NJGWiGKOqjOM4TfM4jkMpqmrpLEuiSmAwx0Wiks0aADHGtm299wwgZx+C77vW+9b7y65b7bq/IiLvvYg0zBz6znvfOjek9GK3v7K8NdtbniE7yAFyBdmIQP5oGAYiqvC6Dn1/4f3jSF/F7sRuxU6sp4jbiFPEl4jX0KiaVEXEzGpzkVqbiPq+984RkDYbFSmiBnTMj5gfMj9gvuB/1HUdgKYPoetqbeecqm7nOZmpKqf0huUT4SbihvCepazNAcuZqA65USJ/hokopQRAAA/cEd6x7CHPIS+ldtaldimFmYmo0RCccyvMzDWTWYAeeAv9RnpifSUK1XKGx3GESIyxqdyi+2RernVEHwP/7PlHz98jPgd8ILDI+v8hhJq8Pvg+eZ7nMgz1hFkQuVxG5ZkzVROzmU3TJsb4G/4F12VjRd9LYlgAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\" img\" title=\" img\" src=\"/static/b449969a4a4c0e7eab84abb50749236d/37523/1-2.png\" srcset=\"/static/b449969a4a4c0e7eab84abb50749236d/e9ff0/1-2.png 180w,\n/static/b449969a4a4c0e7eab84abb50749236d/f21e7/1-2.png 360w,\n/static/b449969a4a4c0e7eab84abb50749236d/37523/1-2.png 720w,\n/static/b449969a4a4c0e7eab84abb50749236d/302a4/1-2.png 1080w,\n/static/b449969a4a4c0e7eab84abb50749236d/07a9c/1-2.png 1440w,\n/static/b449969a4a4c0e7eab84abb50749236d/29114/1-2.png 1920w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\n<p>이후 프로젝트가 생성되면 project setting 탭에서 URI를 복사해서 아래에서\r\nprisma세팅할 때 붙여넣어주자.</p>\n<br/>\n<h2 id=\"2-prisma-init-및-supabase-url연결\" style=\"position:relative;\"><a href=\"#2-prisma-init-%EB%B0%8F-supabase-url%EC%97%B0%EA%B2%B0\" aria-label=\"2 prisma init 및 supabase url연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2 prisma init 및 supabase url연결</h2>\n<p><code class=\"language-text\">npm i -D prisma</code></p>\n<p><code class=\"language-text\">npm i @prisma/client</code></p>\n<p><code class=\"language-text\">npx prisma init</code></p>\n<p>여기까지 하면 prisma/schema.prisma 파일이 생성되고,</p>\n<p>.env 파일에 자동으로 <code class=\"language-text\">DATABASE_URL=\"postgresql://....\"</code> 이 추가된다.</p>\n<p>초기에 생성된 .env파일의 DATABASE_URL은 prisma에서 임의로 설정해준것이기 때문에,\r\n이 경로를 위의 <code class=\"language-text\">#1</code>에서 카피한 Supabase의 URI를 넣어주고\r\n<code class=\"language-text\">[YOUR-PASSWORD]</code> 부분엔 <code class=\"language-text\">#1</code>에서 설정했던 데이터베이스 패스워드를 넣어주자</p>\n<p><code class=\"language-text\">npx prisma studio</code> 를 해서 localhost:5555에서 화면이 잘나오면 세팅은 잘 끝난거다.</p>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 102.22222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACN0lEQVQ4y9WU204aURSGfQSbKMpwRuYEaIUIrW0NWBUUsYIWFBlAOnhgxJKqvTFt0vaifQDtrRd90a8ZJETpgHrZiz9rr3348q+dvdfIpEvF1IRT4e64k3ejwxvG5Z/B7g721np7+s6OWAHvypw3YV4xguAJMTFgz0CgGe2e0D1NuoOdNdNh/3y/EUuHnYNdyGNk6XDSpdyWY5boC+P2T2N3KQ/qwZLHnSqjDplRh9LRM6c6VDZn14zTwuGYU2XWo1CTw5SlEGUxSGlKoeT/V3t+hV2/gtdlQi0c2l0qo06FNb/Kn2iEm3icm1iM37LMVSDAlRjgWhR7YzNeSxJBj8qY9R2qjAki088XqO410UrHaLtH1DQDvd6mXj2lWjbQax+pV1o09tvsFhp4pmaxOWRr4LhdRI0uUm99p3n2C/30B82zn9SNb5SPLinon6kYX9g7vqTa+kqu+gl3IDIcGIwkyZ6csHFu8O68xeZFi+WWzkpBZzV/QCrfIJ1vdOLq1gEeMYrNIQ0GhqKL5I7aFM8uyJ20SeuHpPRDMqUm2aJBdsdgvdjsxeFAQUKeWWApu09q4wNLmRqJtEYyrZFY00hkNJLrla6qJDMV3FPDShYkxPAr5pcLxBfzzC+/58XbLV4ubfM6VWQuscmb1A5r2wes5OrMJXII3vCgn3L7uB2+GXxKHJ8S64txvHIMnxzDfye39/1ny+ZgE6TOvdyT0Dfu5v0t7B5w4pHN4Enta1hvHAT5v4B/AaO+WijZHi02AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\" img\" title=\" img\" src=\"/static/aebc8eca0f87e3b1f6bfe6d30f46288e/37523/2-1.png\" srcset=\"/static/aebc8eca0f87e3b1f6bfe6d30f46288e/e9ff0/2-1.png 180w,\n/static/aebc8eca0f87e3b1f6bfe6d30f46288e/f21e7/2-1.png 360w,\n/static/aebc8eca0f87e3b1f6bfe6d30f46288e/37523/2-1.png 720w,\n/static/aebc8eca0f87e3b1f6bfe6d30f46288e/4971b/2-1.png 784w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\n<p>에러가 나오는 이유는 아직 데이터베이스 모델링을 안해줬기 때문인데 잘된거임</p>\n<br/>\n<h2 id=\"3-prisma-schema-생성-및-마이그레이션파일-생성\" style=\"position:relative;\"><a href=\"#3-prisma-schema-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1\" aria-label=\"3 prisma schema 생성 및 마이그레이션파일 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3 prisma schema 생성 및 마이그레이션파일 생성</h2>\n<p>스키마 설정을 한번 해보자.</p>\n<p>prisma/schema.prisma에 다음과 같이 코드를 작성해보자\r\nmodal User와 Store의 스키마를 작성해줬다.</p>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">generator client <span class=\"token punctuation\">{</span>\r\n  provider <span class=\"token operator\">=</span> <span class=\"token string\">\"prisma-client-js\"</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\ndatasource db <span class=\"token punctuation\">{</span>\r\n  provider <span class=\"token operator\">=</span> <span class=\"token string\">\"postgresql\"</span>\r\n  url      <span class=\"token operator\">=</span> <span class=\"token function\">env</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DATABASE_URL\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodel User <span class=\"token punctuation\">{</span>\r\n    id       Int  @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">autoincrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    email    String @unique\r\n    name     String\r\n<span class=\"token punctuation\">}</span>\r\n\r\nmodel Store <span class=\"token punctuation\">{</span>\r\n    id        Int  @id @<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span><span class=\"token function\">autoincrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    phone     String<span class=\"token operator\">?</span> <span class=\"token comment\">// tel_no</span>\r\n    address   String<span class=\"token operator\">?</span> <span class=\"token comment\">//rdn_code_nm</span>\r\n    lat       String<span class=\"token operator\">?</span> <span class=\"token comment\">// y_dnts</span>\r\n    lng       String<span class=\"token operator\">?</span> <span class=\"token comment\">//x_cnts</span>\r\n    name      String<span class=\"token operator\">?</span> <span class=\"token comment\">//upso_nm</span>\r\n    category  String<span class=\"token operator\">?</span> <span class=\"token comment\">//bizcnd_code_nm</span>\r\n    storeType String<span class=\"token operator\">?</span> <span class=\"token comment\">//cob_code_nm</span>\r\n    foodCertifyName String<span class=\"token operator\">?</span> <span class=\"token comment\">// crtfc_gbn_nm</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>이후 터미널에 다음과 같이 입력\r\n<code class=\"language-text\">npx prisma migrate dev --name init</code></p>\n</li>\n<li>\n<p>그럼 아래와 같은 문구가 나오고,</p>\n</li>\n</ul>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">migrations<span class=\"token operator\">/</span>\r\n  └─ 20240224005913_init<span class=\"token operator\">/</span>\r\n    └─ migration<span class=\"token punctuation\">.</span>sql\r\n\r\nYour database is now <span class=\"token keyword\">in</span> sync <span class=\"token keyword\">with</span> your schema<span class=\"token punctuation\">.</span></code></pre></div>\n<br/>\n<p>prisma/migrations/migration.sql 의 파일이 생긴다.\r\n방금 작성한 스키마 모델이 sql형태로 변환되어 저장이된것이다.</p>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiUlEQVQoz3WT624jIQyF5yGitM0AvmBgmEsStdKu9v0f7KwgySip2h9Hngt8PsZmEMtQFYjc5LzH6DxC8GCN/Z9Gw1QrxBJIFIEIjgNO7gSOgrysYDU4N2KQqKhLRfABzjmUOmO+nDGvC8wikimIGD4E+EAdFkIAMYOYICoIzD25xITBa0K5zAh226Qi2NYN5fIXMU0IgcBEoIca7B7DXfs3FgxEguXrivnPBdKyiICtwKLCokFi6Uno7iw8Rwp7ogd8CMLgnPD+/tZLtpQxrSumdetltbPcnXyD7LCHY+LmkFBygW/NGB1MFZ/bBqvnHfLs4jvsFUgYRjdinTNqjn2DiuJrqZjqci/Pv4B+gu7uW8kfpxHbecM8lT4yMWp3vE4FKU8gTT3JS9m/OO/At482S9Zf2hnGlKF1huaCkg2ptAZF5PhoDP1Y9g70xDgejzgcDh3ILGC5q80X3xbzUyef1c6+ae+yXf/het6gGjvQO9djf/Z+v0Etgap2xRi7rN2SnLvMrK/7D+J+L9Gle+iaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\" img\" title=\" img\" src=\"/static/58f90df9a212a86b5153aed2bb20ae5f/37523/3-1.png\" srcset=\"/static/58f90df9a212a86b5153aed2bb20ae5f/e9ff0/3-1.png 180w,\n/static/58f90df9a212a86b5153aed2bb20ae5f/f21e7/3-1.png 360w,\n/static/58f90df9a212a86b5153aed2bb20ae5f/37523/3-1.png 720w,\n/static/58f90df9a212a86b5153aed2bb20ae5f/302a4/3-1.png 1080w,\n/static/58f90df9a212a86b5153aed2bb20ae5f/07a9c/3-1.png 1440w,\n/static/58f90df9a212a86b5153aed2bb20ae5f/29114/3-1.png 1920w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\n<p>위의 이미지같이 생성이되는데, 이 파일은 <code class=\"language-text\">절대 수정하면 안되고</code>\r\n혹시나 변경 사항이 생기면 새롭게 만들어줘야한다.</p>\n<p><code class=\"language-text\">npx prisma studio</code>를 입력하면 #2에서는 에러가 떳던 화면이 다음과 같이 나오는걸 볼 수있다.</p>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA3ElEQVQoz72S7w6CIBTFfYRAEPMfJqQtqUzr/R/tNNBcbGmbH/pwxrj33N8OdwTD44nr9YamOeF8blHXDe7dgL4fYIyB0hpKTdLfpY9HtMag6zoEItVgQiKMChCegfIchKXYsRSE2XsGHpfgsXQ96/M11qwnTisEJJKgTiVCUYKK8bRicQWR1cgrg+zQurvzRN8kQbhEEM4A+aHRECUKhbqA75WD8UTPPd8v5xAfQF9v4D6vp/QHr7c09xNod0yntWwGvgfWQEvQ1YRLw5ufvKX3E0jnbyW92t8SvgDxQB6p8qL8eQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\" img\" title=\" img\" src=\"/static/dd28feaa24d95d71bcd6cec322f2094c/37523/3-2.png\" srcset=\"/static/dd28feaa24d95d71bcd6cec322f2094c/e9ff0/3-2.png 180w,\n/static/dd28feaa24d95d71bcd6cec322f2094c/f21e7/3-2.png 360w,\n/static/dd28feaa24d95d71bcd6cec322f2094c/37523/3-2.png 720w,\n/static/dd28feaa24d95d71bcd6cec322f2094c/302a4/3-2.png 1080w,\n/static/dd28feaa24d95d71bcd6cec322f2094c/07a9c/3-2.png 1440w,\n/static/dd28feaa24d95d71bcd6cec322f2094c/29114/3-2.png 1920w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\n<p>마찬가지로 원격 DB인 Supabase 홈페이지에서도 모델이 생성된거를 확인할 수 있다.\r\n<br/></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKklEQVQoz5WT646DIBCFfYwqWG8wgKLVbtJsYnz/xzrNTIvpNjXN/vgyXA5nBjJk67pi2zbcbjdc5hnjNOE6/2AYBjjv4b3/EB3IPbBEEsdxxLIsyAxZkLWoqjOISIzi9YIhRowxou97MUkEH8BnjDWwbYWubdB1HUIICN4jY/c+BNR1DWstnHMIvwtaMjCdgTFG9tq2ldg0D4OmrhE6heAJRA4xRikmI7LwjkSktYbSGrpQUErJvCzLP1Eo9VN7Fj1rGU6WVVUFRr9sqOfBff4F1hZF8TDkzGnxiPdqP7EbHh1+X+NbTNMkT/NJc1jhkSGTKkyaV+2/rrwbf3kW7oTsNRNnyfP8EN5PmjROnE4naau9QoYbl/uJ4c6XZj2A+5Xfk+EPwR+AuQPMXi6357Ar/gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\" img\" title=\" img\" src=\"/static/f76815b061ee0b026e262d6be395f8b6/37523/3-3.png\" srcset=\"/static/f76815b061ee0b026e262d6be395f8b6/e9ff0/3-3.png 180w,\n/static/f76815b061ee0b026e262d6be395f8b6/f21e7/3-3.png 360w,\n/static/f76815b061ee0b026e262d6be395f8b6/37523/3-3.png 720w,\n/static/f76815b061ee0b026e262d6be395f8b6/302a4/3-3.png 1080w,\n/static/f76815b061ee0b026e262d6be395f8b6/07a9c/3-3.png 1440w,\n/static/f76815b061ee0b026e262d6be395f8b6/29114/3-3.png 1920w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\r\n<br/>\n<h2 id=\"4-seed-생성\" style=\"position:relative;\"><a href=\"#4-seed-%EC%83%9D%EC%84%B1\" aria-label=\"4 seed 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4 seed 생성</h2>\n<p><code class=\"language-text\">npm i -D ts-node</code></p>\n<blockquote>\n<p>nextjs를 사용하므로 다음을 package.json에 붙여넣자</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string-property property\">\"prisma\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token string-property property\">\"seed\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ts-node --compiler-options {\\\"module\\\":\\\"CommonJS\\\"} prisma/seed.ts\"</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<br/>\n<ul>\n<li>\n<p>prisma/seed.ts 파일 생성 후 다음처럼 입력해주자</p>\n<br/>\n</li>\n</ul>\n<blockquote>\n<p>참고로 seed.ts파일 생성 예시는 <a href=\"https://www.prisma.io/docs/orm/prisma-migrate/workflows/seeding#how-to-seed-your-database-in-prisma-orm\">여기서확인</a> 하자</p>\n</blockquote>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PrismaClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@prisma/client'</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> data <span class=\"token keyword\">from</span> <span class=\"token string\">'../src/data/store_data.json'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">const</span> prisma <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PrismaClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">seedData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token comment\">// 로컬에 등록된 store_data.json 데이터중, 원하는 것들만 꺼내옴</span>\r\n  data<span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token string\">'DATA'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> storeData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">phone</span><span class=\"token operator\">:</span> store<span class=\"token operator\">?.</span>tel_no<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> store<span class=\"token operator\">?.</span>rdn_code_nm<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> store<span class=\"token operator\">?.</span>y_dnts<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> store<span class=\"token operator\">?.</span>x_cnts<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> store<span class=\"token operator\">?.</span>upso_nm<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">category</span><span class=\"token operator\">:</span> store<span class=\"token operator\">?.</span>bizcnd_code_nm<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">storeType</span><span class=\"token operator\">:</span> store<span class=\"token operator\">?.</span>cob_code_nm<span class=\"token punctuation\">,</span>\r\n      <span class=\"token literal-property property\">foodCertifyName</span><span class=\"token operator\">:</span> store<span class=\"token operator\">?.</span>crtfc_gbn_nm<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">// prisma 생성</span>\r\n    <span class=\"token comment\">// 앞전에 생성한 스키마 StoreModal이있어서 store라고 name을 지음</span>\r\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> prisma<span class=\"token punctuation\">.</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> storeData<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">await</span> <span class=\"token function\">seedData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    process<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">.</span><span class=\"token function\">finally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    prisma<span class=\"token punctuation\">.</span><span class=\"token function\">$disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p><code class=\"language-text\">// 프리즈마 생성</code>이라고 주석처리된 부분으로 프리즈마를 생성하고,\r\n<code class=\"language-text\">npx prisma db seed</code>를 입력해주면 seed가 생성이 되고,\r\nSupabase를 가서 확인해보면 데이터가 생성되어있는걸 볼 수 있다.</p>\n<br/>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVQoz4WT247DIAxE8xtt7gmY3BOSalfaqv//WbOaabNqn/bBAoM5HoNJ7vc7Ho8Hvr6/sa4bpmnCHm8YhkG2rqvGaZ4xL4vmoetgIci8mXzuxRiROPMw71GWBcwM4zhiiivGaRK842EzWQhBfusdHK0p0dQ1WufQ9732EmYZ+h5VVcF7r8Xx50DjHcw/ExBGZU3TyLquR11VGH2OZRpgFlTJPM9IzDy6YGjbFkVRoCxL9BaQpakO73FX8HEcqOtaMTyYpila5yXier3COafECQG0LMuQ57nmwzhqTsC2bQLu+64quE7VhFBEMEOaZQITmjCA2WgnkGUzwTsw7vEJLIoPINUy1jkvP6FDI/AsmZmyLP0DLsuikX6eF3qsE8gyeZYKBXxXSCBVMOhUGLcoFVT5BH6W3IXwP5CWvh6FyuK2aeQ6Y6hQj9I6Xc8H8L1kPUxRqEXos3w2q+4wRvUqY6jwcrlIsXcel5daCvhQyObUfcXnvenX7LvsdjsEYgzhbPKz2amOSbn/C0RjOwwxz7PJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\" img\" title=\" img\" src=\"/static/955b8f3991777af3e7607537f7ec7856/37523/4-1.png\" srcset=\"/static/955b8f3991777af3e7607537f7ec7856/e9ff0/4-1.png 180w,\n/static/955b8f3991777af3e7607537f7ec7856/f21e7/4-1.png 360w,\n/static/955b8f3991777af3e7607537f7ec7856/37523/4-1.png 720w,\n/static/955b8f3991777af3e7607537f7ec7856/302a4/4-1.png 1080w,\n/static/955b8f3991777af3e7607537f7ec7856/07a9c/4-1.png 1440w,\n/static/955b8f3991777af3e7607537f7ec7856/29114/4-1.png 1920w\" sizes=\"(max-width: 720px) 100vw, 720px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#1-supabase-%ED%9A%8C%EC%9B%90%EA%B0%80%EC%9E%85-%EB%B0%8F-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\">1 Supabase 회원가입 및 프로젝트 생성</a></li>\n<li><a href=\"#2-prisma-init-%EB%B0%8F-supabase-url%EC%97%B0%EA%B2%B0\">2 prisma init 및 supabase url연결</a></li>\n<li><a href=\"#3-prisma-schema-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1\">3 prisma schema 생성 및 마이그레이션파일 생성</a></li>\n<li><a href=\"#4-seed-%EC%83%9D%EC%84%B1\">4 seed 생성</a></li>\n</ul>\n</div>","frontmatter":{"date":"February 24, 2024","title":"Prisma,Supabase 세팅 및 사용","categories":"prisma Supabase","author":"정중식","emoji":"✍"},"fields":{"slug":"/Prisma/prisma01/"}},"site":{"siteMetadata":{"siteUrl":"https://jungsikjeong.github.io","comments":{"utterances":{"repo":"jungsikjeong/jungsikjeong.github.io"}}}}},"pageContext":{"slug":"/Prisma/prisma00/","nextSlug":"/NextJs/Nextjs02/","prevSlug":"/Prisma/prisma01/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}